!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.parseGedcom=e()}}(function(){return function e(t,n,r){function o(u,f){if(!n[u]){if(!t[u]){var a="function"==typeof require&&require;if(!f&&a)return a(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};t[u][0].call(l.exports,function(e){var n=t[u][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(e,t,n){function r(e){return function(t){return t.tag===e}}function o(e){var t=e.filter(r("INDI")).map(u),n=e.filter(r("FAM")),o=n.map(u),i=n.reduce(function(e,t){return e.concat(a(t))},[]),c=t.concat(o),l=c.reduce(function(e,t,n){return e[t.id]=n,e},{});return i=i.map(f(l)),{nodes:c,links:i}}function i(e){if("INDI"!==e.tag)return"Family";var t=(e.tree.filter(r("NAME"))||[])[0];return t?t.data.replace(/\//g,""):void 0}function u(e){return e.id=e.pointer,e.name=i(e),e}function f(e){return function(t){function n(t){return e[t]}return{source:n(t.source),target:n(t.target)}}}function a(e){var t=e.tree.filter(function(e){return e.data&&"@"===e.data[0]}).map(function(t){return{source:e.pointer,target:t.data}});return t}t.exports=o},{}],2:[function(e,t,n){function r(e){function t(e,t){if(t.level===e.level)e.pointer.tree.push(t);else if(t.level>e.level){var n=e.pointer;e.pointer=e.pointer.tree[e.pointer.tree.length-1],e.pointer.tree.push(t),e.pointer.up=n,e.level=t.level}else if(t.level<e.level){for(;t.level<=e.pointer.level&&e.pointer.up;)e.pointer=e.pointer.up;e.pointer.tree.push(t),e.level=t.level}return e}function n(e){var t=e.match(i);return t?{level:parseInt(t[1],10),pointer:t[2].trim(),tag:t[3].trim(),data:t[4].trim(),tree:[]}:null}var r={root:{tree:[]},level:0};return r.pointer=r.root,o(e.split("\n").map(n).filter(function(e){return e}).reduce(t,r).root.tree).map(function(e){delete e.up,delete e.level,this.update(e)})}var o=e("traverse"),i=/\s*(0|[1-9]+[0-9]*) (@[^@]+@ |)([A-Za-z0-9_]+)( [^\n\r]*|)/;t.exports.parse=r,t.exports.d3ize=e("./d3ize")},{"./d3ize":1,traverse:3}],3:[function(e,t,n){function r(e){this.value=e}function o(e,t,n){var r=[],o=[],u=!0;return function e(f){function a(){if("object"==typeof s.node&&null!==s.node){s.keys&&s.node_===s.node||(s.keys=v(s.node)),s.isLeaf=0==s.keys.length;for(var e=0;e<o.length;e++)if(o[e].node_===f){s.circular=o[e];break}}else s.isLeaf=!0,s.keys=null;s.notLeaf=!s.isLeaf,s.notRoot=!s.isRoot}var c=n?i(f):f,l={},p=!0,s={node:c,node_:f,path:[].concat(r),parent:o[o.length-1],parents:o,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(e,t){s.isRoot||(s.parent.node[s.key]=e),s.node=e,t&&(p=!1)},delete:function(e){delete s.parent.node[s.key],e&&(p=!1)},remove:function(e){h(s.parent.node)?s.parent.node.splice(s.key,1):delete s.parent.node[s.key],e&&(p=!1)},keys:null,before:function(e){l.before=e},after:function(e){l.after=e},pre:function(e){l.pre=e},post:function(e){l.post=e},stop:function(){u=!1},block:function(){p=!1}};if(!u)return s;a();var d=t.call(s,s.node);return void 0!==d&&s.update&&s.update(d),l.before&&l.before.call(s,s.node),p?("object"!=typeof s.node||null===s.node||s.circular||(o.push(s),a(),y(s.keys,function(t,o){r.push(t),l.pre&&l.pre.call(s,s.node[t],t);var i=e(s.node[t]);n&&g.call(s.node,t)&&(s.node[t]=i.node),i.isLast=o==s.keys.length-1,i.isFirst=0==o,l.post&&l.post.call(s,i),r.pop()}),o.pop()),l.after&&l.after.call(s,s.node),s):s}(e).node}function i(e){if("object"==typeof e&&null!==e){var t;if(h(e))t=[];else if(f(e))t=new Date(e.getTime?e.getTime():e);else if(a(e))t=new RegExp(e);else if(c(e))t={message:e.message};else if(l(e))t=new Boolean(e);else if(p(e))t=new Number(e);else if(s(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var n=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=n,t=new r}return y(v(e),function(n){t[n]=e[n]}),t}return e}function u(e){return Object.prototype.toString.call(e)}function f(e){return"[object Date]"===u(e)}function a(e){return"[object RegExp]"===u(e)}function c(e){return"[object Error]"===u(e)}function l(e){return"[object Boolean]"===u(e)}function p(e){return"[object Number]"===u(e)}function s(e){return"[object String]"===u(e)}var d=t.exports=function(e){return new r(e)};r.prototype.get=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!g.call(t,r)){t=void 0;break}t=t[r]}return t},r.prototype.has=function(e){for(var t=this.value,n=0;n<e.length;n++){var r=e[n];if(!t||!g.call(t,r))return!1;t=t[r]}return!0},r.prototype.set=function(e,t){for(var n=this.value,r=0;r<e.length-1;r++){var o=e[r];g.call(n,o)||(n[o]={}),n=n[o]}return n[e[r]]=t,t},r.prototype.map=function(e){return o(this.value,e,!0)},r.prototype.forEach=function(e){return this.value=o(this.value,e,!1),this.value},r.prototype.reduce=function(e,t){var n=1===arguments.length,r=n?this.value:t;return this.forEach(function(t){this.isRoot&&n||(r=e.call(this,r,t))}),r},r.prototype.paths=function(){var e=[];return this.forEach(function(t){e.push(this.path)}),e},r.prototype.nodes=function(){var e=[];return this.forEach(function(t){e.push(this.node)}),e},r.prototype.clone=function(){var e=[],t=[];return function n(r){for(var o=0;o<e.length;o++)if(e[o]===r)return t[o];if("object"==typeof r&&null!==r){var u=i(r);return e.push(r),t.push(u),y(v(r),function(e){u[e]=n(r[e])}),e.pop(),t.pop(),u}return r}(this.value)};var v=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},h=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},y=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n,e)};y(v(r.prototype),function(e){d[e]=function(t){var n=[].slice.call(arguments,1),o=new r(t);return o[e].apply(o,n)}});var g=Object.hasOwnProperty||function(e,t){return t in e}},{}]},{},[2])(2)});